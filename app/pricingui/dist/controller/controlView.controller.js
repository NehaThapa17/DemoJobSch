sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageBox","sap/ui/model/json/JSONModel","sap/ui/core/Fragment","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/BusyIndicator","sap/m/MessageToast","sap/m/Token","marathonpetroleum/hsc/pricingui/utils/formatter","marathonpetroleum/hsc/pricingui/utils/constants","sap/m/SearchField"],function(e,t,r,a,i,o,n,d,s,l,u,c){"use strict";return e.extend("marathonpetroleum.hsc.pricingui.controller.controlView",{formatter:l,onInit:function(){this.oBundle=this.getOwnerComponent().getModel("i18n").getResourceBundle();this.oDataModelT=this.getOwnerComponent().getModel();n.show();var e=new r;var t=[];e.setData(t);this.getView().setModel(e,"oModel");this.getOwnerComponent().setModel(e,"oModel");var a=sap.ui.core.UIComponent.getRouterFor(this);a.getRoute("RoutecontrolView").attachPatternMatched(this.onRouteControl,this);this.getF4Customer();this.getCCEmails()},getJSTime:function(){n.show();var e=this;this.oDataModelT.callFunction("/getJobDetails",{method:u.httpGet,success:function(t){n.hide();var r=JSON.parse(t.getJobDetails);if(r.DISPLAY!==undefined){var a=new Date,i=r.DISPLAY.indexOf(u.DIV),o=r.DISPLAY.substring(u.INTZERO,i),d=r.DISPLAY.substring(i+u.INTONE);a.setHours(o);a.setMinutes(d);a=new Date(a.getTime()-u.INTONE*u.INTSIXTY*u.INTSIXTY*u.INTTHOUS*u.INTSIX);var s=a.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:true});e.getView().byId("idTimePickerInput").setDateValue(a);e.getView().byId("idTextDailyST").setText(s);e.getView().byId("idSwitchInput").setState(true);e.getView().byId("idInfoLabel").setColorScheme(u.INTSEVEN);e.getView().byId("idInfoLabel").setText("Active");e.getView().byId("idTimePickerInput").setEnabled(false)}else{e.getView().byId("idTextDailyST").setText(u.SPACE);e.getView().byId("idTimePickerInput").setValue(u.SPACE);e.getView().byId("idSwitchInput").setState(false);e.getView().byId("idTimePickerInput").setEnabled(true);e.getView().byId("idInfoLabel").setText("InActive");e.getView().byId("idInfoLabel").setColorScheme(u.INTONE)}if(r.ONDEMAND!==undefined){var a=new Date(r.ONDEMAND);a=new Date(a.getTime()-u.INTONE*u.INTSIXTY*u.INTSIXTY*u.INTTHOUS*u.INTSIX);var s=a.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:true});var l=a.toDateString().replace(/^\S+\s/,""),c=l+u.SPACE+s;e.getView().byId("idTextOnDemandST").setText(c);e.getView().byId("idDatePickerOnDemand").setValue(c);e.getView().getModel("oModel").setProperty("/dateValue",c);e.getView().byId("idButtonOff").setVisible(true)}else{e.getView().byId("idTextOnDemandST").setText(u.SPACE);e.getView().getModel("oModel").setProperty("/dateValue",u.SPACE);e.getView().byId("idButtonOff").setVisible(false)}if(r.SUSPENDTo!==undefined&&r.SUSPENDFrom!==undefined){var g=new Date(r.SUSPENDTo);var h=new Date(r.SUSPENDFrom);h=new Date(h.getTime()-u.INTONE*u.INTSIXTY*u.INTSIXTY*u.INTTHOUS*u.INTSIX);var s=h.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:true});var l=h.toDateString().replace(/^\S+\s/,""),m=l+u.SPACE+s;g=new Date(g.getTime()-u.INTONE*u.INTSIXTY*u.INTSIXTY*u.INTTHOUS*u.INTSIX);var T=g.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:true});var p=g.toDateString().replace(/^\S+\s/,""),f=p+u.SPACE+T;if(r.sActive==="Suspended"){e.getView().byId("idInfoLabel").setText("Suspended");e.getView().byId("idInfoLabel").setColorScheme(2);e.getView().byId("idDatePickerSuspend").setEnabled(false);e.getView().byId("idDatePicker2Suspend").setEnabled(false);e.getView().byId("idSwitchInputSuspend").setState(true)}if(r.sActive===true){e.getView().byId("idDatePickerSuspend").setEnabled(false);e.getView().byId("idDatePicker2Suspend").setEnabled(false);e.getView().byId("idSwitchInputSuspend").setState(true)}e.getView().byId("idObjStatusS2").setText(f);e.getView().byId("idObjStatusS1").setText(m);e.getView().getModel("oModel").setProperty("/dateValueF",m);e.getView().getModel("oModel").setProperty("/dateValueT",f);e.getView().byId("idDatePickerSuspend").setValue(m);e.getView().byId("idDatePicker2Suspend").setValue(f)}else{e.getView().byId("idObjStatusS2").setText(u.SPACE);e.getView().byId("idObjStatusS1").setText(u.SPACE);e.getView().getModel("oModel").setProperty("/dateValueF",u.SPACE);e.getView().getModel("oModel").setProperty("/dateValueT",u.SPACE);e.getView().byId("idDatePickerSuspend").setEnabled(true);e.getView().byId("idDatePicker2Suspend").setEnabled(true);e.getView().byId("idSwitchInputSuspend").setState(false)}if(r.CHECKDATA!==undefined){var a=new Date,i=r.CHECKDATA.indexOf(u.DIV),o=r.CHECKDATA.substring(u.INTZERO,i),d=r.CHECKDATA.substring(i+u.INTONE);a.setHours(o);a.setMinutes(d);a=new Date(a.getTime()-u.INTONE*u.INTSIXTY*u.INTSIXTY*u.INTTHOUS*u.INTSIX);var s=a.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:true});e.getView().byId("idTimePickerInputDI").setDateValue(a);e.getView().byId("idSwitchInputDataInc").setState(true);e.getView().byId("idTimePickerInputDI").setEnabled(false);e.getView().byId("idTextIncST").setText(s);e.getView().getModel("oModel").setProperty("/dateValueIn",s)}else{e.getView().byId("idTextIncST").setText(u.SPACE);e.getView().getModel("oModel").setProperty("/dateValueIn",u.SPACE);e.getView().byId("idTimePickerInputDI").setValue(u.SPACE);e.getView().byId("idSwitchInputDataInc").setState(false);e.getView().byId("idTimePickerInputDI").setEnabled(true)}},error:function(r){n.hide();t.error(e.oBundle.getText("techError"),{details:r})}})},onRouteControl:function(){this.getCustomerDetails();this.getTerminalDetails();this.getProductDetails();this.getJSTime()},getCCEmails:function(){var e=this;this.oDataModelT.callFunction("/getOnCCEmail",{method:u.httpGet,success:function(t){var r=t.getOnCCEmail.data,a,i,o;if(r!=undefined){if(r.length!=u.INTZERO){for(var d=u.INTZERO;d<r.length;d++){switch(r[d].Key){case u.emailCC:a=r[d].Value.split(u.spliter);break;case u.emailTo:o=r[d].Value.split(u.spliter);break;case u.pricingDate:i=r[d].Value;if(i){var s=new Date(i);s=new Date(s.getTime()-u.INTONE*u.INTSIXTY*u.INTSIXTY*u.INTTHOUS*u.INTSIX);e.getView().byId("idDatePickerPricingDate").setDateValue(s)}else{e.getView().byId("idDatePickerPricingDate").setValue(u.SPACE)}break}}}}e.getView().getModel("oModel").setProperty("/emailsCC",a);e.getView().getModel("oModel").setProperty("/emailsCCInc",o);n.hide()},error:function(r){n.hide();t.error(e.oBundle.getText("techError"),{details:r})}})},getTerminalDetails:function(){var e=this;this.oDataModelT.callFunction("/getTerminalDetails",{method:u.httpGet,success:function(r){if(r.getTerminalDetails.data.status!==undefined&&r.getTerminalDetails.data.status!==200){t.error(r.getTerminalDetails.data.message)}else{var a=r.getTerminalDetails.data,i=[];for(var o=0;o<a.length;o++){if(a[o].OnDemandJob===true){var d=a[o].Terminal;i.push(d)}}e.getView().getModel("oModel").setProperty("/TerminalData",r.getTerminalDetails.data);e.getView().byId("idTitleTerminal").setText(e.oBundle.getText("comTerText",[r.getTerminalDetails.data.length]))}n.hide()},error:function(e){n.hide();t.error(e.message,{details:e})}})},getProductDetails:function(){var e=this;this.oDataModelT.callFunction("/getOnPremProductDetails",{method:u.httpGet,success:function(t){if(t.getOnPremProductDetails.data){e.getView().getModel("oModel").setProperty("/ProductData",t.getOnPremProductDetails.data);e.getView().byId("idTitleProduct").setText(e.oBundle.getText("comProText",[t.getOnPremProductDetails.data.length]))}n.hide()},error:function(r){n.hide();t.error(e.oBundle.getText("techError"),{details:r})}})},getCustomerDetails:function(){var e=this;this.oDataModelT.callFunction("/getCustomerDetails",{method:u.httpGet,success:function(t){var r=[],a=[];var i=t.getCustomerDetails.data;if(i){e.getView().byId("idTitleCustomer").setText(e.oBundle.getText("comCusText",[t.getCustomerDetails.data.length]));for(var o=u.INTZERO;o<i.length;o++){var d=i[o].EmailTo.split(u.spliter),s=[];for(var l=u.INTZERO;l<d.length;l++){var c={},g="",h="",m="",T="";c.email=d[l];s.push(c)}if(i[o].TerminalList.results.length!=u.INTZERO){g=i[o].TerminalList.results[u.INTZERO].Terminal;h=i[o].TerminalList.results[u.INTZERO].TerminalName}if(i[o].ProductList.results.length!=u.INTZERO){m=i[o].ProductList.results[u.INTZERO].Product;T=i[o].ProductList.results[u.INTZERO].ProductName}if(i[o].OnDemandJob===true){var p=new sap.m.Token({key:i[o].Customer+"/"+i[o].ShipTo,text:i[o].ShipToName+"("+i[o].Customer+"/"+i[o].ShipTo+")"});a.push(p)}var f={};f={CountEmail:i[o].CountEmail,CountProduct:i[o].CountProduct,CountTerminal:i[o].CountTerminal,CountShipTo:i[o].CountShipTo,Customer:i[o].Customer,CustomerName:i[o].CustomerName,DailyJob:i[o].DailyJob,EmailTo:i[o].EmailTo,OnDemandJob:i[o].OnDemandJob,ProductList:i[o].ProductList,TerminalList:i[o].TerminalList,ProductFirst:m,ProdNameFirst:T,TerminalFirst:g,TerNameFirst:h,ShipTo:i[o].ShipTo,ShipToName:i[o].ShipToName,EmailArray:s,VHKey:i[o].Customer+"/"+i[o].ShipTo};r.push(f)}e.getView().byId("idMultiInputCustomer").setTokens(a);e.getView().getModel("oModel").setProperty("/CustomerData",r);n.hide()}},error:function(r){n.hide();t.error(e.oBundle.getText("techError"),{details:r})}})},getF4Customer:function(){var e=this;this.oDataModelT.callFunction("/getOnPremCustomerF4",{method:u.httpGet,success:function(t){e.getView().getModel("oModel").setProperty("/CustValHelp",t.getOnPremCustomerF4.data);n.hide()},error:function(r){n.hide();t.error(e.oBundle.getText("techError"),{details:r})}})},getF4Terminal:function(){var e=this;this.oDataModelT.callFunction("/getOnPremTerminalF4",{method:u.httpGet,success:function(t){e.getView().getModel("oModel").setProperty("/TerminalValHelp",t.getOnPremTerminalF4.data);n.hide()},error:function(r){n.hide();t.error(e.oBundle.getText("techError"),{details:r})}})},getF4Product:function(){var e=this;this.oDataModelT.callFunction("/getOnPremProductF4",{method:u.httpGet,success:function(t){e.getView().getModel("oModel").setProperty("/ProductValHelp",t.getOnPremProductF4.data);n.hide()},error:function(r){n.hide();t.error(e.oBundle.getText("techError"),{details:r})}})},onDeleteCustomer:function(){n.show();var e=this.getView().byId("idProductsTable"),r=this,a=e.getSelectedContextPaths()[0];var i=e.indexOfItem(e.getSelectedItem());var o=this.getView().getModel("oModel").getProperty(a);if(i!==u.INTNEGONE){var s=o;r.oDataModelT.callFunction("/getCustomer",{method:u.httpGet,urlParameters:{customer:s.Customer,shipTo:s.ShipTo},success:function(e){n.hide();var t=e.getCustomer.data;if(t){debugger;var a=e.getCustomer.data.__metadata.etag;r.getView().getModel("oModel").setProperty("/CusEtag",a)}},error:function(e){n.hide();t.error(r.oBundle.getText("techError"),{details:e})}});t.confirm(r.oBundle.getText("customerDeleted",[s.Customer,s.CustomerName,s.ShipTo,s.ShipToName]),{onClose:function(e){if(e===u.actionOK){n.show();var a=r.getView().getModel("oModel").getProperty("/CusEtag");r.oDataModelT.callFunction("/deleteCustomer",{method:u.httpPost,urlParameters:{etag:a,etag:a,customer:s.Customer,shipTo:s.ShipTo},success:function(e){n.hide();if(e.deleteCustomer.data.message!==undefined){if(e.deleteCustomer.data.status===412){var a=r.oBundle.getText("msgError");t.error(a)}else{var a=e.deleteCustomer.data.message;t.error(a)}}else{r.getView().getModel("oModel").setProperty("/CusEtag",u.SPACE);d.show(r.oBundle.getText("delSucc"));r.getCustomerDetails()}},error:function(e){n.hide();var r=e.message;t.error(r,{details:e})}})}}})}else{t.error(r.oBundle.getText("delCheck"))}},onDeleteCustomerPopout:function(){n.show();var e=this.getView().byId("idTablePopout"),r=this,a=e.getSelectedContextPaths()[0];var i=e.indexOfItem(e.getSelectedItem());var o=this.getView().getModel("oModel").getProperty(a);if(i!==u.INTNEGONE){var s=o;r.oDataModelT.callFunction("/getCustomer",{method:u.httpGet,urlParameters:{customer:s.Customer,shipTo:s.ShipTo},success:function(e){n.hide();var t=e.getCustomer.data;if(t){debugger;var a=e.getCustomer.data.__metadata.etag;r.getView().getModel("oModel").setProperty("/CusEtag",a)}},error:function(e){n.hide();t.error(r.oBundle.getText("techError"),{details:e})}});t.confirm(r.oBundle.getText("customerDeleted",[s.Customer,s.CustomerName,s.ShipTo,s.ShipToName]),{onClose:function(e){if(e===u.actionOK){n.show();var a=r.getView().getModel("oModel").getProperty("/CusEtag");r.oDataModelT.callFunction("/deleteCustomer",{method:u.httpPost,urlParameters:{etag:a,etag:a,customer:s.Customer,shipTo:s.ShipTo},success:function(e){n.hide();if(e.deleteCustomer.data.message!==undefined){if(e.deleteCustomer.data.status===412){var a=r.oBundle.getText("msgError");t.error(a)}else{var a=e.deleteCustomer.data.message;t.error(a)}}else{r.getView().getModel("oModel").setProperty("/CusEtag",u.SPACE);d.show(r.oBundle.getText("delSucc"));r.getCustomerDetails()}},error:function(e){n.hide();var r=e.message;t.error(r,{details:e})}})}}})}else{t.error(r.oBundle.getText("delCheck"))}},onSwtichChange:function(e){n.show();var t=e.getSource().getState(),r=this.getView().byId("idTimePickerInput").getValue();this.getJSStatus(t,r)},getJSStatus:function(e,r){var a=this;this.oDataModelT.callFunction("/getJobDetails",{method:u.httpGet,success:function(i){n.hide();var o=JSON.parse(i.getJobDetails);if(o.sActive==="Suspended"){if(e===false){a.getView().byId("idSwitchInput").setState(true)}else{a.getView().byId("idSwitchInput").setState(false)}a.getView().byId("idInfoLabel").setText("Suspended");a.getView().byId("idInfoLabel").setColorScheme(2);a.getView().byId("idDatePickerSuspend").setEnabled(false);a.getView().byId("idDatePicker2Suspend").setEnabled(false);a.getView().byId("idSwitchInputSuspend").setState(true);t.error(a.oBundle.getText("susCheck"))}else{n.hide();a.executeSchDaily(e,r)}},error:function(e){n.hide();t.error(a.oBundle.getText("techError"),{details:e})}})},executeSchDaily:function(e,r){var a=this;if(e===false){this.getView().byId("idTimePickerInput").setEnabled(true);this.getView().byId("idInfoLabel").setText("InActive");this.getView().byId("idInfoLabel").setColorScheme(u.INTONE);this.oDataModelT.callFunction("/updateSchedule",{method:u.httpGet,urlParameters:{desc:u.daily},success:function(e){n.hide();t.information(a.oBundle.getText("turnOffDaily"))},error:function(e){n.hide();t.error(a.oBundle.getText("techError"),{details:e})}})}else{if(r!==""&&r!==u.SPACE&&r!==undefined){n.show();var i=new Date(this.getView().byId("idTimePickerInput").getDateValue()),o=i.getHours(),d=(i.getMinutes()<u.INTTEN?u.ZERO:"")+i.getMinutes(),s=new Date;s.setHours(o);s.setMinutes(d);s=new Date(s.getTime()+u.INTONE*u.INTSIXTY*u.INTSIXTY*u.INTTHOUS*u.INTSIX);var l=(s.getMinutes()<u.INTTEN?u.ZERO:"")+s.getMinutes();var c=s.getHours()+u.DIV+l;this.getView().byId("idTimePickerInput").setEnabled(false);this.getView().byId("idInfoLabel").setColorScheme(u.INTSEVEN);this.getView().byId("idInfoLabel").setText("Active");this.getView().byId("idTextDailyST").setText(r);this.oDataModelT.callFunction("/createSchedule",{method:u.httpGet,urlParameters:{time:c,desc:u.daily},success:function(e){n.hide();t.success(a.oBundle.getText("succJSDaily"))},error:function(e){n.hide();t.error(a.oBundle.getText("techError"),{details:e})}})}else{a.getView().byId("idSwitchInput").setState(false);t.error(a.oBundle.getText("manTime"))}}},getJSStatusSus:function(){var e=this;this.oDataModelT.callFunction("/getJobDetails",{method:u.httpGet,success:function(t){n.hide();var r=JSON.parse(t.getJobDetails);if(r.sActive==="Suspended"){if(oState===false){e.getView().byId("idSwitchInput").setState(true)}else{e.getView().byId("idSwitchInput").setState(false)}e.getView().byId("idInfoLabel").setText("Suspended");e.getView().byId("idInfoLabel").setColorScheme(2)}if(r.DISPLAY!==undefined){e.getView().byId("idInfoLabel").setColorScheme(u.INTSEVEN);e.getView().byId("idInfoLabel").setText("Active")}},error:function(r){n.hide();t.error(e.oBundle.getText("techError"),{details:r})}})},onValueHelpRequested:function(){this._oBasicSearchField=new c;this.oColModel=new r;var e={cols:[{label:this.oBundle.getText("customerID"),template:"Customer",iskey:true},{label:"Customer Name",template:"CustomerName"},{label:"Ship-To",template:"ShipTo",iskey:true},{label:"Ship-To Name",template:"ShipToName"}]};this.oColModel.setData(e);this._oValueHelpDialogCust=sap.ui.xmlfragment(u.fragmentCusVH,this);this.getView().addDependent(this._oValueHelpDialogCust);var t=this._oValueHelpDialogCust.getFilterBar();t.setFilterBarExpanded(false);t.setBasicSearch(this._oBasicSearchField);this._oBasicSearchField.attachSearch(function(){t.search()});this.valueHelpModel=this.getView().getModel("oModel");this._oValueHelpDialogCust.getTableAsync().then(function(t){t.setModel(this.valueHelpModel);t.setModel(this.oColModel,"columns");if(t.bindRows){t.bindAggregation("rows","/CustomerData")}if(t.bindItems){t.bindAggregation("items","/CustomerData",function(){return new ColumnListItem({cells:e.map(function(e){return new Label({text:"{"+e.template+"}"})})})})}this._oValueHelpDialogCust.update()}.bind(this));this._oValueHelpDialogCust.setTokens(this.getView().byId("idMultiInputCustomer").getTokens());this._oValueHelpDialogCust.open()},onValueHelpOkPress:function(e){var t=e.getParameter("tokens");this.getView().byId("idMultiInputCustomer").setTokens(t);this._oValueHelpDialogCust.close()},onValueHelpCancelPress:function(){this._oValueHelpDialogCust.close()},onValueHelpAfterClose:function(){this._oValueHelpDialogCust.destroy()},handleTableSelectDialogPress:function(){var e=this.getView();if(!this.byId("custTable")){a.load({id:e.getId(),name:u.fragmentCusTablePopout,controller:this}).then(function(t){e.addDependent(t);t.open()})}else{this.byId("custTable").open()}},handleProductTableSelectDialogPress:function(){var e=this.getView();if(!this.byId("prodTable")){a.load({id:e.getId(),name:u.fragmentProdTablePopout,controller:this}).then(function(t){e.addDependent(t);t.open()})}else{this.byId("prodTable").open()}},handleTerminalTableSelectDialogPress:function(){var e=this.getView();if(!this.byId("terTable")){a.load({id:e.getId(),name:u.fragmentTerTablePopout,controller:this}).then(function(t){e.addDependent(t);t.open()})}else{this.byId("terTable").open()}},handleEmailPopoverPress:function(e){var t=e.getSource(),i=this.getView(),o=e.getSource().getParent().getParent().getBindingContextPath(),n=this.getView().getModel("oModel").getProperty(o),d=new r;d.setData(n.EmailArray);if(!this._pPopoverEmail){this._pPopoverEmail=a.load({id:i.getId(),name:u.fragmentEmailPopover,controller:this}).then(function(e){i.addDependent(e);return e})}this._pPopoverEmail.then(function(e){e.openBy(t);e.setModel(d)})},handlePopoverPress:function(e){var t=e.getSource(),i=this.getView(),o=e.getSource().getParent().getParent().getParent().getBindingContextPath(),n=this.getView().getModel("oModel").getProperty(o),d=new r;d.setData(n.ProductList);if(!this._pPopover){this._pPopover=a.load({id:i.getId(),name:u.fragmentProdPopover,controller:this}).then(function(e){i.addDependent(e);return e})}this._pPopover.then(function(e){e.openBy(t);e.setModel(d)})},handleTerPopoverPress:function(e){var t=e.getSource(),i=this.getView(),o=e.getSource().getParent().getParent().getParent().getBindingContextPath(),n=this.getView().getModel("oModel").getProperty(o),d=new r;d.setData(n.TerminalList);if(!this._tPopover){this._tPopover=a.load({id:i.getId(),name:u.fragmentTerPopover,controller:this}).then(function(e){i.addDependent(e);return e})}this._tPopover.then(function(e){e.openBy(t);e.setModel(d)})},handleTerminalSelectDialogPress:function(){var e=this.getView();if(!this.byId("addTerminal")){a.load({id:e.getId(),name:u.fragmentAddTerminal,controller:this}).then(function(t){e.addDependent(t);t.open();t.setTitle("Add Terminal");sap.ui.core.Fragment.byId(e.getId(),"idTxtShCount").setText(u.INTZERO)})}else{this.byId("addTerminal").open();oDialog.setTitle("Add Terminal")}},onTerminalClose:function(){this.byId("addTerminal").close();this.byId("addTerminal").destroy()},handleEditTerminalSelectDialogPress:function(){var e=this.getView().byId("idTableTerminal"),r=this;var i=this.getView().getModel("oModel").getProperty("/TerminalData");var o=e.indexOfItem(e.getSelectedItem());if(o!==u.INTNEGONE){var d=i[o];var s=this.getView();if(!this.byId("addTerminal")){a.load({id:s.getId(),name:u.fragmentAddTerminal,controller:this}).then(function(e){s.addDependent(e);e.open();e.setTitle(r.oBundle.getText("editTerminal"));var t=sap.ui.core.Fragment.byId(s.getId(),"idInputTerminalID");t.setEnabled(false);sap.ui.core.Fragment.byId(s.getId(),"idInputTerminalID").setValue(d.Terminal);sap.ui.core.Fragment.byId(s.getId(),"idInputTerminalName").setValue(d.TerminalName);sap.ui.core.Fragment.byId(s.getId(),"idTxtShCount").setText(d.ShiptoCount)})}r.oDataModelT.callFunction("/getTerminal",{method:u.httpGet,urlParameters:{terminal:d.Terminal},success:function(e){if(e.getTerminal.data.status===undefined){debugger;n.hide();var t=e.getTerminal.data.__metadata.etag;r.getView().getModel("oModel").setProperty("/TerEtag",t)}},error:function(e){t.error(e.message)}})}else{t.error(r.oBundle.getText("selectTerminal"))}},handleEditTerminalPopout:function(){var e=this.getView().byId("idTerTablePopout"),r=this;var i=e.getSelectedContextPaths()[0];var o=e.indexOfItem(e.getSelectedItem());if(o!==u.INTNEGONE){var d=this.getView().getModel("oModel").getProperty(i);var s=this.getView();if(!this.byId("addTerminal")){a.load({id:s.getId(),name:u.fragmentAddTerminal,controller:this}).then(function(e){s.addDependent(e);e.open();e.setTitle(r.oBundle.getText("editTerminal"));var t=sap.ui.core.Fragment.byId(s.getId(),"idInputTerminalID");t.setEnabled(false);sap.ui.core.Fragment.byId(s.getId(),"idInputTerminalID").setValue(d.Terminal);sap.ui.core.Fragment.byId(s.getId(),"idInputTerminalName").setValue(d.TerminalName);sap.ui.core.Fragment.byId(s.getId(),"idTxtShCount").setText(d.ShiptoCount)})}r.oDataModelT.callFunction("/getTerminal",{method:u.httpGet,urlParameters:{terminal:d.Terminal},success:function(e){if(e.getTerminal.data.status===undefined){debugger;n.hide();var t=e.getTerminal.data.__metadata.etag;r.getView().getModel("oModel").setProperty("/TerEtag",t)}},error:function(e){t.error(e.message)}})}else{t.error(r.oBundle.getText("selectTerminal"))}},handleProductSelectDialogPress:function(){var e=this.getView(),t=this;if(!this.byId("addProduct")){a.load({id:e.getId(),name:u.fragmentAddProd,controller:this}).then(function(r){e.addDependent(r);r.open();r.setTitle(t.oBundle.getText("addProduct"));sap.ui.core.Fragment.byId(e.getId(),"idProdShCount").setText(u.INTZERO)})}else{this.byId("addProduct").open();oDialog.setTitle(t.oBundle.getText("addProduct"))}},handleEditProductSelectDialogPress:function(){var e=this.getView().byId("producttbl"),r=this;var i=this.getView().getModel("oModel").getProperty("/ProductData");var o=e.indexOfItem(e.getSelectedItem());if(o!==u.INTNEGONE){var d=i[o];var s=this.getView();if(!this.byId("addProduct")){a.load({id:s.getId(),name:u.fragmentAddProd,controller:this}).then(function(e){s.addDependent(e);e.open();e.setTitle(r.oBundle.getText("editProduct"));var t=sap.ui.core.Fragment.byId(s.getId(),"idInputProductID");t.setEnabled(false);sap.ui.core.Fragment.byId(s.getId(),"idInputProductID").setValue(d.Product);sap.ui.core.Fragment.byId(s.getId(),"idInputProductName").setValue(d.ProductName);sap.ui.core.Fragment.byId(s.getId(),"idProdShCount").setText(d.ShiptoCount)})}r.oDataModelT.callFunction("/getProduct",{method:u.httpGet,urlParameters:{product:d.Product},success:function(e){if(e.getProduct.data.status===undefined){debugger;n.hide();var t=e.getProduct.data.__metadata.etag;r.getView().getModel("oModel").setProperty("/ProEtag",t)}},error:function(e){}})}else{t.error(this.oBundle.getText("selectProduct"))}},handleEditProductPopout:function(){var e=this.getView().byId("idProdTablePopout"),r=this;var i=e.getSelectedContextPaths()[0];var o=e.indexOfItem(e.getSelectedItem());if(o!==u.INTNEGONE){var d=this.getView().getModel("oModel").getProperty(i);var s=this.getView();if(!this.byId("addProduct")){a.load({id:s.getId(),name:u.fragmentAddProd,controller:this}).then(function(e){s.addDependent(e);e.open();e.setTitle(r.oBundle.getText("editProduct"));var t=sap.ui.core.Fragment.byId(s.getId(),"idInputProductID");var a=sap.ui.core.Fragment.byId(s.getId(),"idInputProductName");sap.ui.core.Fragment.byId(s.getId(),"idProdShCount").setText(d.ShiptoCount);t.setValue(d.Product);t.setEnabled(false);a.setValue(d.ProductName)})}else{this.byId("addProduct").open();oDialog.setTitle(r.oBundle.getText("editProduct"))}r.oDataModelT.callFunction("/getProduct",{method:u.httpGet,urlParameters:{product:d.Product},success:function(e){if(e.getProduct.data.status===undefined){debugger;n.hide();var t=e.getProduct.data.__metadata.etag;r.getView().getModel("oModel").setProperty("/ProEtag",t)}},error:function(e){}})}else{t.error(this.oBundle.getText("selectProduct"))}},onProductClose:function(){this.byId("addProduct").close();this.byId("addProduct").destroy()},onClose:function(){this.byId("custTable").close()},onCloseProd:function(){this.byId("prodTable").close()},onCloseTer:function(){this.byId("terTable").close()},onCreateCustomer:function(){var e=sap.ui.core.UIComponent.getRouterFor(this);e.navTo("RoutecreateView")},onSearchCustomerPop:function(e){var t=[],r=[];var a=e.getSource().getValue();if(a&&a.length>u.INTZERO){t.push(new i({filters:[new i({path:u.pathCus,operator:o.Contains,value1:a}),new i({path:u.pathCName,operator:o.Contains,value1:a}),new i({path:u.pathSH,operator:o.Contains,value1:a}),new i({path:u.pathSHName,operator:o.Contains,value1:a})],and:false}));r.push(new i({filters:t,and:true}))}var n=this.byId("idTablePopout");var d=n.getBinding("items");d.filter(r,"Application")},onSearchTerminalPop:function(e){var t=[],r=[];var a=e.getSource().getValue();if(a&&a.length>u.INTZERO){t.push(new i({filters:[new i({path:u.pathTer,operator:o.Contains,value1:a}),new i({path:u.pathTName,operator:o.Contains,value1:a})],and:false}));r.push(new i({filters:t,and:true}))}var n=this.byId("idTerTablePopout");var d=n.getBinding("items");d.filter(r,"Application")},onSearchProductPop:function(e){var t=[],r=[];var a=e.getSource().getValue();if(a&&a.length>u.INTZERO){t.push(new i({filters:[new i({path:u.pathProd,operator:o.Contains,value1:a}),new i({path:u.pathProdName,operator:o.Contains,value1:a})],and:false}));r.push(new i({filters:t,and:true}))}var n=this.byId("idProdTablePopout");var d=n.getBinding("items");d.filter(r,"Application")},onEditCustomer:function(){var e=this.getView().byId("idProductsTable"),r=[];var a=e.getSelectedContextPaths()[0],i=this,o=e.indexOfItem(e.getSelectedItem());if(o!==u.INTNEGONE){var n=this.getView().getModel("oModel").getProperty(a);var d=[],s=[];for(var l=u.INTZERO;l<n.ProductList.results.length;l++){d.push({Product:n.ProductList.results[l].Product,ProductName:n.ProductList.results[l].ProductName})}for(var l=u.INTZERO;l<n.TerminalList.results.length;l++){s.push({Terminal:n.TerminalList.results[l].Terminal,TerminalName:n.TerminalList.results[l].TerminalName})}r.push({Customer:n.Customer,CustomerName:n.CustomerName,ShipTo:n.ShipTo,ShipToName:n.ShipToName,ProductList:d,TerminalList:s,EmailTo:n.EmailTo,EmailArray:n.EmailArray,DailyJob:n.DailyJob,OnDemandJob:n.OnDemandJob});this.getView().getModel("oModel").setProperty("/selectedRow",r);var c=sap.ui.core.UIComponent.getRouterFor(this);c.navTo("RouteEditView",{Data:"1"})}else{t.error(this.oBundle.getText("selectCustomerproceed"))}},onEditCustomerPopout:function(){var e=this.getView().byId("idTablePopout"),r=[];var a=e.getSelectedContextPaths()[0],i=this,o=e.indexOfItem(e.getSelectedItem());if(o!==u.INTNEGONE){var n=this.getView().getModel("oModel").getProperty(a);var d=[],s=[];for(var l=u.INTZERO;l<n.ProductList.results.length;l++){d.push({Product:n.ProductList.results[l].Product,ProductName:n.ProductList.results[l].ProductName})}for(var l=u.INTZERO;l<n.TerminalList.results.length;l++){s.push({Terminal:n.TerminalList.results[l].Terminal,TerminalName:n.TerminalList.results[l].TerminalName})}r.push({Customer:n.Customer,CustomerName:n.CustomerName,ShipTo:n.ShipTo,ShipToName:n.ShipToName,ProductList:d,TerminalList:s,EmailTo:n.EmailTo,EmailArray:n.EmailArray,DailyJob:n.DailyJob,OnDemandJob:n.OnDemandJob});this.getView().getModel("oModel").setProperty("/selectedRow",r);var c=sap.ui.core.UIComponent.getRouterFor(this);c.navTo("RouteEditView",{Data:"1"})}else{t.error(this.oBundle.getText("selectCustomerproceed"))}},onValueProductAfterClose:function(){this.byId("addProduct").destroy()},onDeleteTerminal:function(){n.show();var e=this.getView().byId("idTableTerminal"),r=this;var a=e.indexOfItem(e.getSelectedItem());var i=this.getView().getModel("oModel").getProperty("/TerminalData");if(a!==u.INTNEGONE){var o=i[a];r.oDataModelT.callFunction("/getTerminal",{method:u.httpGet,urlParameters:{terminal:o.Terminal},success:function(e){n.hide();if(e.getTerminal.data.status===undefined){var t=e.getTerminal.data.__metadata.etag;r.getView().getModel("oModel").setProperty("/TerEtag",t)}},error:function(e){n.hide();t.error(e.message)}});t.confirm(r.oBundle.getText("terminalDeleted",[o.Terminal,o.TerminalName]),{onClose:function(e){if(e===u.actionOK){n.show();var a=r.getView().getModel("oModel").getProperty("/TerEtag");r.oDataModelT.callFunction("/deleteTerminal",{method:u.httpPost,urlParameters:{etag:a,terminal:o.Terminal},success:function(e){n.hide();if(e.deleteTerminal.data.message!==undefined){if(e.deleteTerminal.data.status===412){var a=r.oBundle.getText("msgError");t.error(a)}else{var a=e.deleteTerminal.data.message;t.error(a)}}else{r.getView().getModel("oModel").setProperty("/TerEtag",u.SPACE);d.show(r.oBundle.getText("delSucc"));r.getTerminalDetails();r.getCustomerDetails()}},error:function(e){n.hide();var r=JSON.parse(e.responseText).error.message.value;t.error(r,{details:e})}})}}})}else{t.error(r.oBundle.getText("delCheck"))}},onDeleteProduct:function(e){n.show();var r=this.getView().byId("producttbl"),a=this;var i=r.indexOfItem(r.getSelectedItem());var o=this.getView().getModel("oModel").getProperty("/ProductData");if(i!==u.INTNEGONE){var s=o[i];a.oDataModelT.callFunction("/getProduct",{method:u.httpGet,urlParameters:{product:s.Product},success:function(e){if(e.getProduct.data.status===undefined){debugger;n.hide();var t=e.getProduct.data.__metadata.etag;a.getView().getModel("oModel").setProperty("/ProEtag",t)}},error:function(e){n.hide();t.error(e.message)}});t.confirm(a.oBundle.getText("productDeleted",[s.Product,s.ProductName]),{onClose:function(e){if(e===u.actionOK){n.show();var r=a.getView().getModel("oModel").getProperty("/ProEtag");a.oDataModelT.callFunction("/deleteProduct",{method:u.httpPost,urlParameters:{etag:r,product:s.Product},success:function(e){n.hide();if(e.deleteProduct.data.message!==undefined){if(e.deleteProduct.data.status===412){var r=a.oBundle.getText("msgError");t.error(r)}else{var r=e.deleteProduct.data.message;t.error(r)}}else{a.getView().getModel("oModel").setProperty("/ProEtag",u.SPACE);d.show(a.oBundle.getText("delSucc"));a.getProductDetails();a.getCustomerDetails()}},error:function(e){n.hide();var r=JSON.parse(e.responseText).error.message.value;t.error(r,{details:e})}})}}})}else{t.error(a.oBundle.getText("delCheck"))}},onDeleteTerminalPopout:function(){n.show();var e=this.getView().byId("idTerTablePopout"),r=this;var a=e.indexOfItem(e.getSelectedItem());var i=e.getSelectedContextPaths()[0];if(a!==u.INTNEGONE){var o=this.getView().getModel("oModel").getProperty(i);r.oDataModelT.callFunction("/getTerminal",{method:u.httpGet,urlParameters:{terminal:o.Terminal},success:function(e){if(e.getTerminal.data.status===undefined){debugger;n.hide();var t=e.getTerminal.data.__metadata.etag;r.getView().getModel("oModel").setProperty("/TerEtag",t)}},error:function(e){n.hide();t.error(e.message)}});t.confirm(r.oBundle.getText("terminalDeleted",[o.Terminal,o.TerminalName]),{onClose:function(e){if(e===u.actionOK){n.show();var a=r.getView().getModel("oModel").getProperty("/TerEtag");r.oDataModelT.callFunction("/deleteTerminal",{method:u.httpPost,urlParameters:{etag:a,terminal:o.Terminal},success:function(e){n.hide();if(e.deleteTerminal.data.message!==undefined){if(e.deleteTerminal.data.status===412){var a=r.oBundle.getText("msgError");t.error(a)}else{var a=e.deleteTerminal.data.message;t.error(a)}}else{r.getView().getModel("oModel").setProperty("/TerEtag",u.SPACE);d.show(r.oBundle.getText("delSucc"));r.getTerminalDetails();r.getCustomerDetails()}},error:function(e){n.hide();var r=JSON.parse(e.responseText).error.message.value;t.error(r,{details:e})}})}}})}else{t.error(r.oBundle.getText("delCheck"))}},onDeleteProductPopout:function(e){n.show();var r=this.getView().byId("idProdTablePopout"),a=this;var i=r.getSelectedContextPaths()[0];var o=r.indexOfItem(r.getSelectedItem());if(o!==u.INTNEGONE){var s=this.getView().getModel("oModel").getProperty(i);a.oDataModelT.callFunction("/getProduct",{method:u.httpGet,urlParameters:{product:s.Product},success:function(e){if(e.getProduct.data.status===undefined){debugger;n.hide();var t=e.getProduct.data.__metadata.etag;a.getView().getModel("oModel").setProperty("/ProEtag",t)}},error:function(e){n.hide();t.error(e.message)}});t.confirm(a.oBundle.getText("productDeleted",[s.Product,s.ProductName]),{onClose:function(e){if(e===u.actionOK){n.show();var r=a.getView().getModel("oModel").getProperty("/ProEtag");a.oDataModelT.callFunction("/deleteProduct",{method:u.httpPost,urlParameters:{etag:r,product:s.Product},success:function(e){n.hide();if(e.deleteProduct.data.message!==undefined){if(e.deleteProduct.data.status===412){var r=a.oBundle.getText("msgError");t.error(r)}else{var r=e.deleteProduct.data.message;t.error(r)}}else{a.getView().getModel("oModel").setProperty("/ProEtag",u.SPACE);d.show(a.oBundle.getText("delSucc"));a.getProductDetails();a.getCustomerDetails()}},error:function(e){n.hide();var r=JSON.parse(e.responseText).error.message.value;t.error(r,{details:e})}})}}})}else{t.error(a.oBundle.getText("delCheck"))}},onEmailCCSelectDialogPress:function(){var e=this.getView(),t=[],r=e.getModel("oModel").getProperty("/emailsCC");if(r){if(r[0]!=""){for(var i=u.INTZERO;i<r.length;i++){var o=new sap.m.Token({key:r[i],text:r[i]});t.push(o)}}}if(!this.byId("addEmail")){a.load({id:e.getId(),name:u.fragmentAddCCEmail,controller:this}).then(function(r){e.addDependent(r);var a=sap.ui.core.Fragment.byId(e.getId(),"multiInputemail");a.setTokens(t);var i=function(e){var t=e.text;var r=t.split("@");var i=/^\w+[\w-+\.]*\@\w+([-\.]\w+)*\.[a-zA-Z]{2,}$/;if(!i.test(t)||r[u.INTONE]!=="marathonpetroleum.com"){a.setValueState(sap.ui.core.ValueState.Error)}else{a.setValueState(sap.ui.core.ValueState.None);return new s({key:t,text:t})}};a.addValidator(i);r.open()})}else{this.byId("addEmail").open()}},onEmailCCSelectDialogPressD:function(){var e=this.getView(),t=[],r=e.getModel("oModel").getProperty("/emailsCCInc");if(r){if(r[0]!=""){for(var i=u.INTZERO;i<r.length;i++){var o=new sap.m.Token({key:r[i],text:r[i]});t.push(o)}}}if(!this.byId("addEmailCC")){a.load({id:e.getId(),name:u.fragmentAddDataIncCCEmail,controller:this}).then(function(r){e.addDependent(r);var a=sap.ui.core.Fragment.byId(e.getId(),"multiInputemailD");a.setTokens(t);var i=function(e){var t=e.text;var r=t.split("@");var i=/^\w+[\w-+\.]*\@\w+([-\.]\w+)*\.[a-zA-Z]{2,}$/;if(!i.test(t)||r[u.INTONE]!=="marathonpetroleum.com"){a.setValueState(sap.ui.core.ValueState.Error)}else{a.setValueState(sap.ui.core.ValueState.None);return new s({key:t,text:t})}};a.addValidator(i);r.open()})}else{this.byId("addEmailCC").open()}},onEmailChangeCC:function(e){var t=this.getView().byId(e.getSource().getId());var r=e.getParameters().value;var a=function(e){var r=e.text;var a=r.split("@");var i=/^\w+[\w-+\.]*\@\w+([-\.]\w+)*\.[a-zA-Z]{2,}$/;if(!i.test(r)){t.setValueState(sap.ui.core.ValueState.Error)}else{t.setValueState(sap.ui.core.ValueState.None);return new s({key:r,text:r})}};if(r===""){t.setValueState(sap.ui.core.ValueState.None)}t.addValidator(a)},onCCEmailClose:function(){this.byId("addEmail").close();this.byId("addEmail").destroy()},onCCEmailCloseD:function(){this.byId("addEmailCC").close();this.byId("addEmailCC").destroy()},onCCEmailSave:function(){n.show();var e=this.getView().byId("multiInputemail").getTokens(),r="",a=this;var i=this.getView().byId("multiInputemail").getValueState();if(i!=="Error"){if(e.length!==u.INTZERO){for(var o=u.INTZERO;o<e.length;o++){var d=e[o].getKey();if(o===u.INTZERO){r=d}else{r=r+u.spliter+d}}}var s={Key:u.emailCC,Value:r};var l=JSON.stringify(s);this.oDataModelT.callFunction("/createCCEmail",{method:u.httpPost,urlParameters:{createData:l},success:function(e){n.hide();t.success(a.oBundle.getText("savedSucc"),{onClose:function(e){if(e===t.Action.OK){a.onCCEmailClose();a.getCCEmails()}}})},error:function(e){n.hide();t.error(a.oBundle.getText("techError"),{details:e})}})}n.hide()},onCCEmailSaveD:function(){var e=this.getView().byId("multiInputemailD").getTokens(),r="",a=this;if(e.length!==u.INTZERO){for(var i=u.INTZERO;i<e.length;i++){var o=e[i].getKey();if(i===u.INTZERO){r=o}else{r=r+u.spliter+o}}}else{t.error(this.oBundle.getText("errorDate"));return}n.show();var d={Key:u.emailTo,Value:r};var s=JSON.stringify(d);this.oDataModelT.callFunction("/createCCEmail",{method:u.httpPost,urlParameters:{createData:s},success:function(e){n.hide();t.success(a.oBundle.getText("savedSucc"),{onClose:function(e){if(e===t.Action.OK){a.onCCEmailCloseD();a.getCCEmails()}}})},error:function(e){n.hide();t.error(a.oBundle.getText("techError"),{details:e})}})},onCreatePricingDate:function(e){e=new Date(e.getTime()+u.INTONE*u.INTSIXTY*u.INTSIXTY*u.INTTHOUS*u.INTSIX);var t=e.toISOString(),r={Key:u.pricingDate,Value:t},a=JSON.stringify(r);this.oDataModelT.callFunction("/createCCEmail",{method:u.httpPost,urlParameters:{createData:a},success:function(e){},error:function(e){}})},onPressEditOnDemand:function(){var e=this;e.getView().byId("idMultiInputCustomer").setEnabled(true);e.getView().byId("idDatePickerOnDemand").setEnabled(true);e.getView().byId("idDatePickerPricingDate").setEnabled(true);e.getView().byId("idButtonSave").setVisible(true);e.getView().byId("idButtonCancel").setVisible(true);e.getView().byId("idButtonEdit").setVisible(false);e.getView().byId("idButtonOff").setVisible(false)},getJSStatusOnDemand:function(){var e=this;this.oDataModelT.callFunction("/getJobDetails",{method:u.httpGet,success:function(r){n.hide();var a=JSON.parse(r.getJobDetails);if(a.sActive==="Suspended"){e.getView().byId("idInfoLabel").setText("Suspended");e.getView().byId("idInfoLabel").setColorScheme(2);t.error(e.oBundle.getText("susCheck"))}else{e.getView().byId("idMultiInputCustomer").setEnabled(true);e.getView().byId("idDatePickerOnDemand").setEnabled(true);e.getView().byId("idDatePickerPricingDate").setEnabled(true);e.getView().byId("idButtonSave").setVisible(true);e.getView().byId("idButtonCancel").setVisible(true);e.getView().byId("idButtonEdit").setVisible(false);e.getView().byId("idButtonOff").setVisible(false)}},error:function(r){n.hide();t.error(e.oBundle.getText("techError"),{details:r})}})},onPressCancelOnDemand:function(){this.getView().byId("idButtonSave").setVisible(false);this.getView().byId("idButtonCancel").setVisible(false);this.getView().byId("idButtonEdit").setVisible(true);that.getView().byId("idButtonOff").setVisible(true);this.getView().byId("idMultiInputCustomer").setEnabled(false);this.getView().byId("idDatePickerOnDemand").setEnabled(false);this.getView().byId("idDatePickerPricingDate").setEnabled(false);this.getView().byId("idMultiInputCustomer").setValueState("None");this.getView().byId("idDatePickerOnDemand").setValueState("None");this.getView().byId("idDatePickerPricingDate").setValueState("None");var e=this.getView().getModel("oModel").getProperty("/dateValue");this.getView().byId("idDatePickerOnDemand").setValue(e)},onPressOffOnDemand:function(){var e=this;t.confirm(e.oBundle.getText("offconfirm"),{onClose:function(r){if(r===u.actionOK){n.show();e.oDataModelT.callFunction("/deleteSchedule",{method:u.httpGet,urlParameters:{desc:u.onDemand},success:function(r){n.hide();t.information(e.oBundle.getText("turnOffIn"))},error:function(r){n.hide();t.error(e.oBundle.getText("techError"),{details:r})}})}}})},onPressSaveOnDemand:function(){var e=this.getView().byId("idDatePickerOnDemand").getValue(),r=this.getView().byId("idDatePickerPricingDate").getDateValue(),a=this,i=this.getView().byId("idInfoLabel").getText(),o=this.getView().byId("idMultiInputCustomer").getTokens(),d=this.getView().byId("idDatePickerPricingDate").getValueState(),s=this.getView().byId("idMultiInputCustomer").getValueState(),l=this.getView().byId("idDatePickerOnDemand").getValueState(),c=new Date(e);var g=new Date,h=g.toLocaleString("en-US",{timeZone:"America/Mexico_City"});h=new Date(h);if(c<h){this.getView().byId("idDatePickerOnDemand").setValueState("Error");t.error(this.oBundle.getText("dateError"))}else{c=new Date(c.getTime()+u.INTONE*u.INTSIXTY*u.INTSIXTY*u.INTTHOUS*u.INTSIX);var m=c.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:true}),T=c.toDateString()+u.SPACE+m;if(e!==""&&e!==u.SPACE&&e!==undefined&&o.length!==u.INTZERO&&(r!==""&&r!==u.SPACE&&r!==undefined&&r!==null)){if(s!==u.ERROR&&l!==u.ERROR&&d!==u.ERROR){this.getView().byId("idMultiInputCustomer").setEnabled(false);this.getView().byId("idDatePickerPricingDate").setEnabled(false);this.getView().byId("idDatePickerOnDemand").setEnabled(false);this.getView().byId("idButtonSave").setVisible(false);this.getView().byId("idButtonCancel").setVisible(false);this.getView().byId("idButtonEdit").setVisible(true);this.getView().byId("idButtonOff").setVisible(true);this.getView().byId("idTextOnDemandST").setText(e);this.getView().getModel("oModel").setProperty("/dateValue",e);var p=this.getPayloadJson(o);this.oDataModelT.callFunction("/createOnDemandSchedule",{method:u.httpGet,urlParameters:{time:T,desc:u.onDemand},success:function(e){n.hide();if(e.createOnDemandSchedule){a.updateOndemandData(p);a.onCreatePricingDate(r);t.success(a.oBundle.getText("succJSOD"));a.getCustomerDetails();a.getTerminalDetails()}},error:function(e){n.hide();t.error(a.oBundle.getText("techError"),{details:e})}})}}else{t.error(a.oBundle.getText("errormsgrequired"))}}},getPayloadJson:function(e){var t=[],r=[];for(var a=u.INTZERO;a<e.length;a++){var i=e[a].getKey().split("/");var o={Customer:i[0],ShipTo:i[1]};t.push(o)}var n={Customer:t};return n},updateOndemandData:function(e){var r=this;var a=JSON.stringify(e);this.oDataModelT.callFunction("/updateOnDemand",{method:u.httpPost,urlParameters:{createData:a},success:function(e){n.hide()},error:function(e){n.hide();t.error(r.oBundle.getText("techError"),{details:e})}})},onPressSuspendClear:function(){this.getView().byId("idDatePickerSuspend").setEnabled(false);this.getView().byId("idDatePicker2Suspend").setEnabled(false);this.getView().byId("idDatePicker2Suspend").setValueState("None");this.getView().byId("idDatePicker2Suspend").setValueState("None");var e=this.getView().getModel("oModel").getProperty("/dateValueF"),t=this.getView().getModel("oModel").getProperty("/dateValueT");this.getView().byId("idDatePickerSuspend").setValue(e);this.getView().byId("idDatePicker2Suspend").setValue(t)},onSwtichChangeSuspend:function(e){var r=this;n.show();var a=e.getSource().getState();if(a===false){this.getView().byId("idDatePickerSuspend").setEnabled(true);this.getView().byId("idDatePicker2Suspend").setEnabled(true);this.getView().byId("idInfoLabel").setText("InActive");this.getView().byId("idInfoLabel").setColorScheme(u.INTONE);r.oDataModelT.callFunction("/deleteSuspendSchedule",{method:u.httpGet,urlParameters:{desc:u.suspend},success:function(e){n.hide();t.information(r.oBundle.getText("turnOffSus"))},error:function(e){n.hide();r.getView().byId("idSwitchInputSuspend").setState(true);t.error(r.oBundle.getText("techError"),{details:e})}})}else{var i=this.getView().byId("idDatePickerSuspend").getValue(),o=this.getView().byId("idDatePicker2Suspend").getValue(),d=this.getView().byId("idDatePickerSuspend").getValueState(),s=this.getView().byId("idDatePicker2Suspend").getValueState(),l=[],r=this,c=new Date(i),g=new Date(o),c=new Date(c.getTime()+u.INTONE*u.INTSIXTY*u.INTSIXTY*u.INTTHOUS*u.INTSIX);g=new Date(g.getTime()+u.INTONE*u.INTSIXTY*u.INTSIXTY*u.INTTHOUS*u.INTSIX);var h=g.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:true}),m=g.toDateString()+u.SPACE+h,T=c.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:true}),p=c.toDateString()+u.SPACE+T,f=new Date(o);var I=new Date,P=I.toLocaleString("en-US",{timeZone:"America/Mexico_City"});P=new Date(P);if(f<P){n.hide();this.getView().byId("idDatePicker2Suspend").setValueState("Error");t.error(this.oBundle.getText("dateError"))}else{if(o!==""&&o!==u.SPACE&&o!==undefined&&(i!==""&&i!==u.SPACE&&i!==undefined)){if(d!==u.ERROR&&s!==u.ERROR){this.getView().byId("idDatePickerSuspend").setEnabled(false);this.getView().byId("idDatePicker2Suspend").setEnabled(false);this.getView().byId("idObjStatusS1").setText(i);this.getView().byId("idObjStatusS2").setText(o);this.getView().getModel("oModel").setProperty("/dateValueF",i);this.getView().getModel("oModel").setProperty("/dateValueT",o);l.push({time:p,Desc:"SUSPENDFROM"});l.push({time:m,Desc:"SUSPENDTO"});var S=JSON.stringify(l);r.oDataModelT.callFunction("/createSuspendSchedule",{method:u.httpGet,urlParameters:{time:S,desc:u.suspend},success:function(e){n.hide();t.success(r.oBundle.getText("succJSSus"))},error:function(e){n.hide();t.error(r.oBundle.getText("techError"),{details:e})}})}else{n.hide();r.getView().byId("idSwitchInputSuspend").setState(false);r.getView().byId("idSwitchInputSuspend").setState(false);t.error(r.oBundle.getText("dateError"))}}else{n.hide();r.getView().byId("idSwitchInputSuspend").setState(false);t.error(r.oBundle.getText("errormsgrequired"))}}}},onhandleChangeDP1Suspend:function(){var e=this.getView().byId("idDatePickerSuspend").getDateValue(),t=this.getView().byId("idDatePicker2Suspend").getDateValue();if(t!=null&&t<=e){this.getView().byId("idDatePicker2Suspend").setValueState("Error")}else{this.getView().byId("idDatePicker2Suspend").setValueState("None")}},onhandleChangeDP2Suspend:function(){var e=this.getView().byId("idDatePickerSuspend").getDateValue(),t=this.getView().byId("idDatePicker2Suspend").getDateValue();if(t<=e){this.getView().byId("idDatePicker2Suspend").setValueState("Error")}else if(e===null){this.getView().byId("idDatePicker2Suspend").setValueState("Error")}else{this.getView().byId("idDatePicker2Suspend").setValueState("None")}},onhandleDateCheck:function(e){var r=e.getSource(),a=e.getParameter("value"),i=e.getParameter("valid");var o=new Date(a);var n=new Date,d=n.toLocaleString("en-US",{timeZone:"America/Mexico_City"});d=new Date(d);if(i){if(o<d){r.setValueState("Error");t.error(this.oBundle.getText("dateError"))}else{r.setValueState("None")}}else{r.setValueState("Error")}},onhandleDateCheckSusFrom:function(e){var r=e.getSource(),a=e.getParameter("value"),i=e.getParameter("valid");var o=this.getView().byId("idDatePickerSuspend").getDateValue(),n=this.getView().byId("idDatePicker2Suspend").getDateValue();var d=new Date(a);var s=new Date,l=s.toLocaleString("en-US",{timeZone:"America/Mexico_City"});l=new Date(l);if(i){if(d<l){r.setValueState("Error");t.error(this.oBundle.getText("dateError"))}else if(n!=null&&n<=o){r.setValueState("Error")}else{r.setValueState("None")}}else{r.setValueState("Error")}},onhandleDateCheckSusTo:function(e){var r=e.getSource(),a=e.getParameter("value"),i=e.getParameter("valid");var o=this.getView().byId("idDatePickerSuspend").getDateValue(),n=this.getView().byId("idDatePicker2Suspend").getDateValue();var d=new Date(a);var s=new Date,l=s.toLocaleString("en-US",{timeZone:"America/Mexico_City"});l=new Date(l);if(i){if(d<l){r.setValueState("Error");t.error(this.oBundle.getText("dateError"))}else if(o===null){this.getView().byId("idDatePicker2Suspend").setValueState("Error")}else if(n<=o){r.setValueState("Error")}else{r.setValueState("None")}}else{r.setValueState("Error")}},onHandleValueHelpTerminal:function(){n.show();this.getF4Terminal();var e=this.getView();if(!this.byId("idDialogTerminalF4")){a.load({id:e.getId(),name:u.fragmentTerF4,controller:this}).then(function(t){e.addDependent(t);t.open()})}else{this.byId("idDialogTerminalF4").open()}},_handleValueHelpClose:function(){this.byId("idDialogTerminalF4").close();this.byId("idDialogTerminalF4").destroy()},_handleValueHelpOKTerminal:function(e){var t=e.getSource().getBinding("items");t.filter([]);var r=e.getParameter("selectedContexts");if(r&&r.length){this.getView().byId("idInputTerminalID").setValue(r.map(function(e){return e.getObject().Terminal}));this.getView().byId("idInputTerminalName").setValue(r.map(function(e){return e.getObject().Terminalname}))}},onPressTerminalSave:function(){var e=this.getView().byId("idInputTerminalID").getValue(),r=this.getView().byId("idInputTerminalName").getValue(),a,i=this.getView().byId("idInputTerminalID").getEnabled(),o=this;if(e!==""&&r!==""){n.show();a={Terminal:e,TerminalName:r};var d=JSON.stringify(a);if(i===true){this.oDataModelT.callFunction("/createTerminal",{method:u.httpPost,urlParameters:{createData:d},success:function(e){n.hide();if(e.createTerminal.data.status!==undefined&&e.createTerminal.data.status!==200){t.error(e.createTerminal.data.message)}else{t.success(o.oBundle.getText("terminalCreated",[e.createTerminal.data.Terminal]),{onClose:function(e){if(e===t.Action.OK){o.onTerminalClose();o.getTerminalDetails()}}})}},error:function(e){n.hide();var r=e.message;t.error(r,{details:e})}})}else{var o=this;var s=o.getView().getModel("oModel").getProperty("/TerEtag");o.oDataModelT.callFunction("/updateTerminal",{method:u.httpPost,urlParameters:{etag:s,createData:d,terminal:e},success:function(e){n.hide();if(e.updateTerminal.data.status!==undefined&&e.updateTerminal.data.status!==200){if(e.updateTerminal.data.status==="412"){var r=o.oBundle.getText("msgError");t.error(r)}else{var r=e.updateTerminal.data.message;t.error(r)}}else{o.getView().getModel("oModel").setProperty("/TerEtag",u.SPACE);t.success(o.oBundle.getText("savedSucc"));o.onTerminalClose();o.getTerminalDetails();o.getCustomerDetails()}},error:function(e){n.hide();var r=e.message;t.error(r,{details:e})}})}}else{t.error(o.oBundle.getText("errormsgrequired"))}},onHandleValueHelpProduct:function(){n.show();this.getF4Product();var e=this.getView();this._oValueHelpDialogListProd=sap.ui.xmlfragment(u.fragmentProdF4,this);e.addDependent(this._oValueHelpDialogListProd);this._oValueHelpDialogListProd.open()},_handleValueHelpCloseProduct:function(){this._oValueHelpDialogListProd.close()},_handleValueHelpOKProduct:function(e){var t=e.getSource().getBinding("items");t.filter([]);var r=e.getParameter("selectedContexts");if(r&&r.length){this.getView().byId("idInputProductID").setValue(r.map(function(e){return e.getObject().Product}));this.getView().byId("idInputProductName").setValue(r.map(function(e){return e.getObject().ProductName}))}},onPressProductSave:function(){var e=this.getView().byId("idInputProductID").getValue(),r=this.getView().byId("idInputProductName").getValue(),a,i,o=this.getView().byId("idInputProductID").getEnabled();var d=this;if(e!==""&&r!==""){n.show();i={Product:e,ProductName:r};var a=JSON.stringify(i);if(o===true){this.oDataModelT.callFunction("/createProduct",{method:u.httpPost,urlParameters:{createData:a},success:function(e){n.hide();if(e.createProduct.data.status!==undefined&&e.createProduct.data.status!==200){t.error(e.createProduct.data.message)}else{t.success(d.oBundle.getText("productCreated",[e.createProduct.data.Product]),{onClose:function(e){if(e===t.Action.OK){d.onProductClose();d.getProductDetails()}}})}},error:function(e){n.hide();var r=e.message;t.error(r,{details:e})}})}else{var s=d.getView().getModel("oModel").getProperty("/ProEtag");d.oDataModelT.callFunction("/updateProduct",{method:u.httpPost,urlParameters:{etag:s,createData:a,product:e},success:function(e){n.hide();if(e.updateProduct.data.status!==undefined&&e.updateProduct.data.status!==200){if(e.updateTerminal.data.status==="412"){var r=d.oBundle.getText("msgError");t.error(r)}else{var r=e.updateTerminal.data.message;t.error(r)}}else{d.getView().getModel("oModel").setProperty("/ProEtag",u.SPACE);t.success(d.oBundle.getText("savedSucc"));d.onProductClose();d.getProductDetails()}},error:function(e){n.hide();var r=e.message;t.error(r,{details:e})}})}}else{t.error(d.oBundle.getText("errormsgrequired"))}},onFilterBarSearch:function(e){var t=this._oBasicSearchField.getValue(),r=e.getParameter("selectionSet");var a=r.reduce(function(e,t){if(t.getValue()){switch(t.getName()){case u.filterCUSID:e.push(new i({path:u.pathCus,operator:o.Contains,value1:t.getValue()}));break;case u.filterSH:e.push(new i({path:u.pathSH,operator:o.Contains,value1:t.getValue()}));break;case u.filterName:e.push(new i({path:u.pathCName,operator:o.Contains,value1:t.getValue()}));break}}return e},[]);a.push(new i({filters:[new i({path:u.pathCus,operator:o.Contains,value1:t}),new i({path:u.pathCName,operator:o.Contains,value1:t}),new i({path:u.pathSH,operator:o.Contains,value1:t}),new i({path:u.pathSHName,operator:o.Contains,value1:t})],and:false}));this._filterTable(new i({filters:a,and:true}))},_filterTable:function(e){var t=this._oValueHelpDialogCust;t.getTableAsync().then(function(r){if(r.bindRows){r.getBinding("rows").filter(e)}if(r.bindItems){r.getBinding("items").filter(e)}t.update()})},_handleValueHelpSearchTerminal:function(e){var t=e.getParameter("value"),r=[],a=[];if(t&&t.length>u.INTZERO){r.push(new i({filters:[new i({path:u.pathTer,operator:o.Contains,value1:t}),new i({path:u.pathTername,operator:o.Contains,value1:t})],and:false}));a.push(new i({filters:r,and:true}))}var n=e.getSource().getBinding("items");n.filter([a])},_handleValueHelpSearchProduct:function(e){var t=e.getParameter("value"),r=[],a=[];if(t&&t.length>u.INTZERO){r.push(new i({filters:[new i({path:u.pathProd,operator:o.Contains,value1:t}),new i({path:u.pathProdName,operator:o.Contains,value1:t})],and:false}));a.push(new i({filters:r,and:true}))}var n=e.getSource().getBinding("items");n.filter([a])},getGroup:function(e){var t=e.getProperty("Customer"),r=t+" "+e.getProperty("CustomerName");return{key:r,title:e.getProperty("CountShipTo").trim()}},getGroupHeader:function(e){return new sap.m.GroupHeaderListItem({title:e.key,count:e.title})},onUnbindTerminal:function(e){n.show();var r=this.getView().byId("idTableTerminal"),a=this;var i=r.indexOfItem(r.getSelectedItem());if(i!==u.INTNEGONE){var o=this.getView().getModel("oModel").getProperty("/TerminalData")[i];if(o.ShiptoCount!==u.INTZERO){a.oDataModelT.callFunction("/getTerminal",{method:u.httpGet,urlParameters:{terminal:o.Terminal},success:function(e){if(e.getTerminal.data.status===undefined){debugger;n.hide();var t=e.getTerminal.data.__metadata.etag;a.getView().getModel("oModel").setProperty("/TerEtag",t)}},error:function(e){n.hide();var r=e.message;t.error(r,{details:e})}});t.confirm(a.oBundle.getText("unBindconfirm",[o.Terminal,o.TerminalName]),{onClose:function(e){if(e===u.actionOK){n.show();var r={Terminal:o.Terminal,RemoveShipto:true};var i=JSON.stringify(r);var s=a.getView().getModel("oModel").getProperty("/TerEtag");a.oDataModelT.callFunction("/unbindShipTo",{method:u.httpPost,urlParameters:{etag:s,createData:i,terminal:o.Terminal},success:function(e){n.hide();if(e.unbindShipTo.data.message!==undefined){if(e.unbindShipTo.data.status===412){var r=a.oBundle.getText("msgError");t.error(r)}else{var r=e.unbindShipTo.data.message;t.error(r)}}else{a.getView().getModel("oModel").setProperty("/TerEtag",u.SPACE);d.show(a.oBundle.getText("terminalunBind"),[e.unbindShipTo.data.Terminal]);a.getTerminalDetails();a.getCustomerDetails()}},error:function(e){n.hide();var r=e.message;t.error(r,{details:e})}})}}})}else{t.error(a.oBundle.getText("checkSH",[o.Terminal,o.TerminalName]))}}else{t.error(a.oBundle.getText("delCheck"))}n.hide()},onUnbindTerminalPopout:function(e){n.show();var r=this.getView().byId("idTerTablePopout"),a=this;var i=r.indexOfItem(r.getSelectedItem());var o=r.getSelectedContextPaths()[0];if(i!==u.INTNEGONE){var s=this.getView().getModel("oModel").getProperty(o);if(s.ShiptoCount!==u.INTZERO){a.oDataModelT.callFunction("/getTerminal",{method:u.httpGet,urlParameters:{terminal:s.Terminal},success:function(e){if(e.getTerminal.data.status===undefined){debugger;n.hide();var t=e.getTerminal.data.__metadata.etag;a.getView().getModel("oModel").setProperty("/TerEtag",t)}},error:function(e){n.hide();var r=e.message;t.error(r,{details:e})}});t.confirm(a.oBundle.getText("unBindconfirm",[s.Terminal,s.TerminalName]),{onClose:function(e){if(e===u.actionOK){n.show();var r={Terminal:s.Terminal,RemoveShipto:true};var i=JSON.stringify(r);var o=a.getView().getModel("oModel").getProperty("/TerEtag");a.oDataModelT.callFunction("/unbindShipTo",{method:u.httpPost,urlParameters:{etag:o,createData:i,terminal:s.Terminal},success:function(e){n.hide();if(e.unbindShipTo.data.message!==undefined){if(e.unbindShipTo.data.status===412){var r=a.oBundle.getText("msgError");t.error(r)}else{var r=e.unbindShipTo.data.message;t.error(r)}}else{a.getView().getModel("oModel").setProperty("/TerEtag",u.SPACE);d.show(a.oBundle.getText("terminalunBind"),[e.unbindShipTo.data.Terminal]);a.getTerminalDetails();a.getCustomerDetails()}},error:function(e){n.hide();var r=e.message;t.error(r,{details:e})}})}}})}else{t.error(a.oBundle.getText("checkSH",[s.Terminal,s.TerminalName]))}}else{t.error(a.oBundle.getText("delCheck"))}n.hide()},onUnbindProduct:function(e){n.show();var r=this.getView().byId("producttbl"),a=this;var i=r.indexOfItem(r.getSelectedItem());if(i!==u.INTNEGONE){var o=this.getView().getModel("oModel").getProperty("/ProductData")[i];if(o.ShiptoCount!==u.INTZERO){a.oDataModelT.callFunction("/getProduct",{method:u.httpGet,urlParameters:{product:o.Product},success:function(e){if(e.getProduct.data.status===undefined){debugger;n.hide();var t=e.getProduct.data.__metadata.etag;a.getView().getModel("oModel").setProperty("/ProEtag",t)}},error:function(e){n.hide();var r=e.message;t.error(r,{details:e})}});t.confirm(a.oBundle.getText("unBindProdconfirm",[o.Product,o.ProductName]),{onClose:function(e){if(e===u.actionOK){n.show();var r={Product:o.Product,RemoveShipto:true};var i=JSON.stringify(r),s=o.Product;var l=a.getView().getModel("oModel").getProperty("/ProEtag");a.oDataModelT.callFunction("/unbindProdShipTo",{method:u.httpPost,urlParameters:{etag:l,createData:i,product:s},success:function(e){n.hide();if(e.unbindProdShipTo.data.message!==undefined){if(e.unbindProdShipTo.data.status===412){var r=a.oBundle.getText("msgError");t.error(r)}else{var r=e.unbindProdShipTo.data.message;t.error(r)}}else{a.getView().getModel("oModel").setProperty("/ProEtag",u.SPACE);d.show(a.oBundle.getText("productunBind"),[e.unbindProdShipTo.data.Product]);a.getProductDetails();a.getCustomerDetails()}},error:function(e){n.hide();var r=e.message;t.error(r,{details:e})}})}}})}else{t.error(a.oBundle.getText("checkProdSH",[o.Product,o.ProductName]))}}else{t.error(a.oBundle.getText("delCheck"))}n.hide()},onUnbindProductPopout:function(e){n.show();var r=this.getView().byId("idProdTablePopout"),a=this;var i=r.indexOfItem(r.getSelectedItem());var o=r.getSelectedContextPaths()[0];if(i!==u.INTNEGONE){var s=this.getView().getModel("oModel").getProperty(o);if(s.ShiptoCount!==u.INTZERO){a.oDataModelT.callFunction("/getProduct",{method:u.httpGet,urlParameters:{product:s.Product},success:function(e){if(e.getProduct.data.status===undefined){debugger;n.hide();var t=e.getProduct.data.__metadata.etag;a.getView().getModel("oModel").setProperty("/ProEtag",t)}},error:function(e){n.hide();var r=e.message;t.error(r,{details:e})}});t.confirm(a.oBundle.getText("unBindProdconfirm",[s.Product,s.ProductName]),{onClose:function(e){if(e===u.actionOK){n.show();var r={Product:s.Product,RemoveShipto:true};var i=JSON.stringify(r),o=s.Product;var l=a.getView().getModel("oModel").getProperty("/ProEtag");a.oDataModelT.callFunction("/unbindProdShipTo",{method:u.httpPost,urlParameters:{etag:l,createData:i,product:o},success:function(e){n.hide();if(e.unbindProdShipTo.data.message!==undefined){if(e.unbindProdShipTo.data.status===412){var r=a.oBundle.getText("msgError");t.error(r)}else{var r=e.unbindProdShipTo.data.message;t.error(r)}}else{a.getView().getModel("oModel").setProperty("/ProEtag",u.SPACE);d.show(a.oBundle.getText("productunBind"),[e.unbindProdShipTo.data.Product]);a.getProductDetails();a.getCustomerDetails()}},error:function(e){n.hide();var r=e.message;t.error(r,{details:e})}})}}})}else{t.error(a.oBundle.getText("checkProdSH",[s.Product,s.ProductName]))}}else{t.error(a.oBundle.getText("delCheck"))}n.hide()},onSwtichChangeDataInc:function(e){n.show();var r=e.getSource().getState(),a=this.getView().byId("idTimePickerInputDI").getValue(),i=this,o=this.getView().getModel("oModel").getProperty("/emailsCCInc");if(o){if(o[0]!=""){if(r===false){this.getView().byId("idTimePickerInputDI").setEnabled(true);this.oDataModelT.callFunction("/deleteSchedule",{method:u.httpGet,urlParameters:{desc:u.checkData},success:function(e){n.hide();i.getView().getModel("oModel").setProperty("/dateValue",u.SPACE);t.information(i.oBundle.getText("turnOffDataCheck"))},error:function(e){n.hide();t.error(i.oBundle.getText("techError"),{details:e})}})}else{if(a!==""&&a!==u.SPACE&&a!==undefined){n.show();var d=new Date(this.getView().byId("idTimePickerInputDI").getDateValue()),s=d.getHours(),l=(d.getMinutes()<u.INTTEN?u.ZERO:"")+d.getMinutes(),c=new Date;c.setHours(s);c.setMinutes(l);c=new Date(c.getTime()+u.INTONE*u.INTSIXTY*u.INTSIXTY*u.INTTHOUS*u.INTSIX);var g=(c.getMinutes()<u.INTTEN?u.ZERO:"")+c.getMinutes();var h=c.getHours()+u.DIV+g;this.getView().byId("idTimePickerInputDI").setEnabled(false);this.getView().byId("idTextIncST").setText(h);this.getView().getModel("oModel").setProperty("/dateValueIn",h);this.oDataModelT.callFunction("/createSchedule",{method:u.httpGet,urlParameters:{time:h,desc:u.checkData},success:function(e){n.hide();t.success(i.oBundle.getText("succJSInconsis"))},error:function(e){n.hide();t.error(i.oBundle.getText("techError"),{details:e})}})}else{i.getView().byId("idSwitchInputDataInc").setState(false);n.hide();t.error(i.oBundle.getText("manTime"))}}}else{n.hide();i.getView().byId("idSwitchInputDataInc").setState(false);t.error(this.oBundle.getText("errorDate"))}}},onInstantCheck:function(){var e=this,r=this.getView().getModel("oModel").getProperty("/emailsCCInc");if(r){if(r[0]!=""){n.show();this.oDataModelT.callFunction("/dataInconCheck",{method:u.httpGet,success:function(r){var a=r.dataInconCheck;n.hide();if(a.data){if(a.data[0].DataCheck.results.length===0){t.information(e.oBundle.getText("noInc"))}else{t.warning(e.oBundle.getText("incFound"));e.oDataModelT.callFunction("/sendInconEmail",{method:u.httpGet,success:function(e){},error:function(e){}})}}},error:function(e){n.hide();t.error(e.message,{details:e})}})}else{t.error(this.oBundle.getText("errorDate"))}}}})});